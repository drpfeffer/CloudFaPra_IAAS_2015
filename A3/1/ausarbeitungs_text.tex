\section{Deploy WordPress using AWS CloudFormation}

\subsection{Example Template}
Für die Einarbeitung haben wir das Template \enquote{WordPress basic single instance} verwendet. Das Template wurde direkt aus der Beispielvorlagensammlung per \enquote{Launch Stack} deployed. Die Initialisierung erfolgt automatisch und nach einer Wartezeit ist die WordPress Instanz online.

\subsection{ClouldFormation - WordPress on two Machines}
Wir haben uns entschieden das im ersten Teil verwendete Template zu modifizieren. Das Template beinhaltet bereits die Installation von WordPress und MySQL, jedoch wird beides auf einer EC2-Instanz deployed. Für diese Aufgabenstellung müssen wir den MySQL Teil auf eine neue Maschine verschieben.

Die json Liste \texttt{Resources} muss zwei Sicherheitsgruppen (WebServer und MySQL), sowie zwei Maschienen vom Typ \texttt{AWS::EC2::Instance} für Web-Server und MySQL-Server enhalten. Der Web-Server Eintrag beschreibt alle notwendigen Befehle zur Installation und Initialisierung des Web-Servers, der MySQL Eintrag beschreibt analog alle notwendigen Befehle für den MySQL-Server.

Der Web-Server muss mit der internen IP-Adresse mit dem MySQL-Server verbunden werden. Dieser Schritt muss in der Konfiguration des Web-Server, genauer in der \texttt{wp-config.php} ausgeführt werden.

Dazu kann der CloudFormation-Befehl \texttt{{ "Fn::GetAtt" : [ "MySQLServer", "PrivateIp" ] }} verwendet werden. Die Funktion gibt die PrivateIp der Resource \enquote{MySQLServer} zurück. Mehr ist zur Verbindung nicht nötig.

\subsection{Start}
Für das Deployen auf CloudFormation verwenden wir das AWS-CLI. Das Skript \texttt{createEC2.sh} verwendet das Template \texttt{wordpress\_mysql.json} und setzt alle notwendigen Properties. Die Installation benötigt ca. 5-10 Minuten.
